(()=>{var e={991:()=>{customElements.define("app-authentication-form",class extends HTMLElement{static get observedAttributes(){return["username"]}constructor(){super(),this._cache=void 0}connectedCallback(){this.#e.addEventListener("submit",(e=>{e.preventDefault(),this.dispatchEvent(new CustomEvent("app-authentify",{detail:this.submit}))}))}attributeChangedCallback(e,t,s){this.#t.value=s||""}get#s(){if(!this._cache){const e=this.querySelector("form");this._cache={formElement:e,passwordController:e.password,userNameController:e.identity,errorArea:this.querySelector("*[data-id=error-feedback]")}}return this._cache}get#e(){return this.#s.formElement}get#t(){return this.#s.userNameController}get#i(){return this.#s.passwordController}get#n(){return this.#s.errorArea}submit=async e=>{this.#n.innerHTML="",this.#t.disabled=!0,this.#i.disabled=!0;try{const t={password:this.#i.value||"",userName:this.#t.value||""};await e(t)}catch(e){const t=e,{errorCode:s}=t;s&&s>=400&&(this.#n.textContent=t.errorMessage)}finally{this.#t.disabled=!1,this.#i.disabled=!1,this.#i.focus(),this.#i.select()}}})},980:()=>{customElements.define("app-calendar-mutation-form",class extends HTMLElement{static get observedAttributes(){return["preferred-date","preferred-time","preferred-description","preferred-details","preferred-is-day-off"]}constructor(){super(),this._cache=void 0,this._value={date:"",timeNumeric:"",timeRange:"",isDayOff:!1,description:"",details:""}}connectedCallback(){const{formController:e,dateController:t,timeRangeController:s,timeNumericController:i,isDayOffController:n,cancelController:a}=this.#s;e.addEventListener("submit",(e=>{e.preventDefault(),this.dispatchEvent(new CustomEvent("app-calendar-mutation-form-submit",{detail:this.submit}))}));for(const e of[t,s,i,n])e.addEventListener("change",(()=>{this.#a(),this.#r()}));a&&(a.addEventListener("change",(()=>{this.#u(),this.#r()})),a.checked=!1,a.disabled=!1),this.#o()}attributeChangedCallback(e,t,s){switch(e){case"preferred-date":this._value.date=s||"";break;case"preferred-time":this._value.timeRange=function(e){switch(e){case"fullday":case"morning":case"afternoon":return e;default:return""}}(s||""),this._value.timeNumeric=function(e){switch(e){case"fullday":case"morning":case"afternoon":return"";default:return e}}(s||"");break;case"preferred-description":this._value.description=s||"";break;case"preferred-details":this._value.details=s||"";break;case"preferred-is-day-off":this._value.isDayOff="yes"===s}this.#o()}#o(){const{dateController:e,timeRangeController:t,timeNumericController:s,isDayOffController:i,descriptionController:n,detailsController:a}=this.#s,r=this._value;i.checked=r.isDayOff,i.disabled=!1,r.isDayOff?(t.value="fullday",t.disabled=!0,s.value="",s.disabled=!0):(t.value=r.timeRange,t.disabled=!1,r.timeRange?(s.value="",s.disabled=!0,s.required=!1):(s.value=r.timeNumeric,s.disabled=!1,s.required=!0)),e.value=r.date,e.disabled=!1,n.value=r.description,n.disabled=!1,a.value=r.details,a.disabled=!1}#u(){if(this.#o(),this.#s.cancelController.checked){const{dateController:e,timeRangeController:t,timeNumericController:s,isDayOffController:i,descriptionController:n,detailsController:a}=this.#s,r=[e,s,t,i,n,a];for(const e of r)e.disabled=!0}}#a(){const{timeRangeController:e,timeNumericController:t,isDayOffController:s}=this.#s;s.checked?(e.value="fullday",e.disabled=!0):e.disabled=!1,e.value?(t.disabled=!0,t.value="",t.required=!1):(t.disabled=!1,t.required=!0)}#r(){const{dateController:e,timeRangeController:t,timeNumericController:s,isDayOffController:i,descriptionController:n,detailsController:a,cancelController:r}=this.#s;this.dispatchEvent(new CustomEvent("app-calendar-mutation-form-change",{detail:{date:e.value||void 0,time:t.value||s.value||void 0,description:n.value||void 0,details:a.value||void 0,isDayOff:i.checked,cancel:r&&r.checked}}))}get#s(){if(!this._cache){const e=this.querySelector("form");this._cache={formController:e,dateController:e.dateController,timeRangeController:e.timeRangeController,timeNumericController:e.timeNumericController,isDayOffController:e.isDayOffController,descriptionController:e.descriptionController,detailsController:e.detailsController,cancelController:e.cancelController}}return this._cache}submit=async e=>{const{dateController:t,timeRangeController:s,timeNumericController:i,descriptionController:n,detailsController:a,isDayOffController:r,cancelController:u}=this.#s;u&&u.checked?await e({cancel:!0}):await e({cancel:!1,isDayOff:r.checked,strDate:t.value||void 0,strTime:s.value||i.value||void 0,strDescription:n.value||"",strDetails:a.value||void 0})}})}},t={};function s(i){var n=t[i];if(void 0!==n)return n.exports;var a=t[i]={exports:{}};return e[i](a,a.exports,s),a.exports}(()=>{"use strict";const e=/^20[0-9][0-9]$/,t=/^(0[1-9]|1[0-2])$/,i=/^([0-2][0-9]|3[0-1])$/,n=/^([0-1][0-9]|2[0-4])$/,a=/^[0-5][0-9]$/;function r(s){e:{const n=s.substring(0,4),a=s.substring(5,7),r=s.substring(8,10);if(n.match(e)&&a.match(t)&&r.match(i)){if("31"==r)switch(a){case"02":case"04":case"06":case"09":case"11":break e}else{if(r>="29"&&"02"==a)break e;if("29"==r&&"02"==a)t:switch(n[2]){case"0":case"2":case"4":case"6":case"8":switch(n[3]){case"0":case"4":case"8":break t;default:break e}default:switch(n[3]){case"2":case"6":break t;default:break e}}}return[n,a,r].join("-")}}return null}function u(){const e=new Date(Date.now()).toLocaleDateString("fr-BE"),[t,s,i]=e.split("/");return[i,s,t].join("-")}function o(e){return new Date(e).toISOString().substring(0,10)}function l(e){return Date.parse(e)}function d(e,t){if(t){const{dayShift:s,weekShift:i}=t;return i||!s?d(e,{dayShift:i?7*i+(s||0):1}):e+864e5*s}return d(e,{})}function c(e){return e.substring(8,10)}function h(e){return e.substring(5,7)}function p(e){switch(e){case"fullday":return"";case"afternoon":return"12";case"morning":return"00";default:return e}}function f(e,t){return e.strDate===t.strDate?function(e,t){return e==t?0:p(e)<=p(t)?-1:1}(e.strTime,t.strTime):e.strDate<=t.strDate?-1:1}function m(e,t,s){const{kind:i,userInitiator:n}=e;if("cursor_move"===i){const{cursor:t}=e;return n&&n===s?({patchCursor:e})=>e(parseInt(String(t))):void 0}{const{strDate:a,strTime:r}=e,u=Date.parse(a);if(isNaN(u)||!r)return;if("create"===i){const{strDescription:i,strDetails:u,isDayOff:o}=e;if(i){const e=n&&n!==s?t:0;return({createEvent:t})=>t([a,r],{description:i,details:u||void 0,isDayOff:o||!1,time:e})}return}return"cancel"===i?({deleteEvent:e})=>e([a,r]):void 0}}function v(e,t,s){if(e){const{version:i}=e;switch(i){case 1:return m(e,t,s);case 2:return function(e,t,s){const{toCancel:i,toCreate:n}=e,a=m(i,t,s),r=m(n,t,s);return a&&r?e=>{a(e),r(e)}:void 0}(e,t,s)}}}async function b(e){const{from:t,password:s,newEvent:i}=e,n="/send_event.php?from="+String(t),a=window.__csrfToken,r={Accept:"application/json"};let u;if(a&&(r["X-Csrf-Token"]=a),s&&(r.Authentication=btoa(s)),i?(r["Content-Type"]="application/json",u=await fetch(n,{method:"POST",headers:r,body:JSON.stringify(i)})):u=await fetch(n,{method:"GET",headers:r}),200!==u.status){const e=u.headers.get("X-Authentication-Delay");throw{errorCode:u.status,authenticationDelay:e,errorMessage:await u.json()}}return u}const y=new class{constructor(){this.view=new Map,this.newEvents=[],this.userCursor=0,this.isBusy=!1,this.lastUpdateTimestamp=0}#l(){if(!this.authentifiedUser.userName)throw{errorMessage:"Utilisateur non identifié",errorCode:403};return{view:this.view,newEvents:[...new Set([...this.newEvents].map((({strTime:e,strDate:t})=>`${t} ${e}`)))].map((e=>{const t=e.indexOf(" ");return{strDate:e.substring(0,t),strTime:e.substring(t+1)}}))}}#d(e){console.log("DELETE",e);const[t,s]=e,i=this.view.get(t);i&&(i.delete(s),i.size||this.view.delete(t))}#c(e,t){const[s,i]=e,{description:n,details:a,time:r,isDayOff:u}=t,o={description:n,details:a,isDayOff:u,unread:!!(r&&r>this.userCursor)};this.view.has(s)||this.view.set(s,new Map),this.view.get(s).set(i,o),o.unread&&this.newEvents.push({time:r,strDate:s,strTime:i})}#h(e){const t=[];for(const s of this.newEvents){const{strDate:i,strTime:n}=s,a=new Map(this.view.get(i)).get(n);a&&(e(s)?a.unread=!1:t.push(s))}this.newEvents=t}#p(e){if(!isNaN(e)){const t=Math.max(this.userCursor,e);this.#h((({time:e})=>(e||-1)<=t))}}async#f(e){const{password:t,newEvent:s}=e;try{if(this.isBusy)return!1;this.isBusy=!0;try{const e=await async function(e,t){function s(e){if(e){const s=window.localStorage.getItem("userName")||void 0,i=[];for(const t of e)if(t){const[e,n]=t;if(n){const t=v(e,n,s);t&&i.push(t)}}for(const e of i)e(t)}}const i=await b(e);return()=>async function(e){let t;for(let i=e;;){const e=parseInt(i.headers.get("x-next-page-time")||"0");if(!e||!isFinite(e)){s(await i.json());break}t=e,[i]=await Promise.all([b({from:e,password:void 0,newEvent:void 0}),i.json().then(s)])}return t}(i)}({password:t,newEvent:s,from:this.userCursor},{patchCursor:this.#p.bind(this),deleteEvent:this.#d.bind(this),createEvent:this.#c.bind(this)}),i=await e();this.userCursor=i||this.userCursor;const n=u();return this.#h((({strDate:e})=>(e||"")<n)),!0}finally{this.isBusy=!1}}catch(e){throw console.error(e),e}}get state(){return new Promise(((e,t)=>{const s=Date.now();(async()=>{if(!this._Backend__lastUpdateTimestamp||this._Backend__lastUpdateTimestamp<s-3e4)try{await this.#f({password:void 0,newEvent:void 0}),this._Backend__lastUpdateTimestamp=s}catch(e){t(e)}try{e(this.#l())}catch(e){t(e)}})()}))}get authentifiedUser(){return{userName:localStorage.getItem("userName")||void 0}}authentify=async e=>{const{password:t,userName:s}=e;return s?localStorage.setItem("userName",s):localStorage.removeItem("userName"),this.#f({password:t,newEvent:void 0})};createEvent=async e=>{const{strTime:t,strDate:s,strDescription:i,strDetails:n,isDayOff:a}=e,r={strTime:t,strDate:s,strDescription:i,strDetails:n,isDayOff:a,userInitiator:window.localStorage.getItem("userName")||void 0,kind:"create",version:1};return this.#f({newEvent:r,password:void 0})};cancelEvent=async e=>{const{strDate:t,strTime:s}=e,i={strDate:t,strTime:s,userInitiator:window.localStorage.getItem("userName")||void 0,version:1,kind:"cancel"};return this.#f({newEvent:i,password:void 0})};editEvent=async e=>{const{toCancel:t,toCreate:s}=e,i=window.localStorage.getItem("userName")||void 0,n={toCreate:(({strTime:e,strDate:t,strDescription:s,strDetails:n,isDayOff:a})=>({strTime:e,strDate:t,strDescription:s,strDetails:n,isDayOff:a,userInitiator:i,version:1,kind:"create"}))(s),toCancel:(({strTime:e,strDate:t})=>({strTime:e,strDate:t,version:1,kind:"cancel",userInitiator:i}))(t),version:2};return this.#f({newEvent:n,password:void 0})};markRead=async()=>{const e={userInitiator:window.localStorage.getItem("userName")||void 0,kind:"cursor_move",version:1,cursor:this.userCursor};return this.#f({newEvent:e,password:void 0})}};function g(e,t){if(Object.hasOwn(e,t))return e[t];throw"Scope does not exhibit property named "+t}customElements.define("app-long-french-date",class extends HTMLElement{constructor(){super(),this.state={strdate:void 0,case:void 0}}static get observedAttributes(){return["strdate"]}attributeChangedCallback(e,t,s){e:{if(s){const t=r(s);if(t){this.state[e]=t;break e}}this.state[e]=void 0}this.#m()}#m(){const e=this.state.strdate;if(e){const t=function(e){switch(e){case"01":return"Janvier";case"02":return"Février";case"03":return"Mars";case"04":return"Avril";case"05":return"Mai";case"06":return"Juin";case"07":return"Juillet";case"08":return"Août";case"09":return"Septembre";case"10":return"Octobre";case"11":return"Novembre";case"12":return"Décembre";default:return""}}(h(e)),s=function(e){switch(e){case"01":return"1er";case"02":return"2";case"03":return"3";case"04":return"4";case"05":return"5";case"06":return"6";case"07":return"7";case"08":return"8";case"09":return"9";default:return e}}(c(e));"1er"==s?(this.innerHTML="1<sup>er</sup> ",this.appendChild(document.createTextNode(t))):this.textContent=`${s} ${t}`}else this.innerHTML=""}}),customElements.define("app-long-french-time",class extends HTMLElement{constructor(){super(),this.state={strtime:void 0,case:void 0}}static get observedAttributes(){return["strtime","case"]}attributeChangedCallback(e,t,s){e:{if(s){const t=function(e){switch(e){case"fullday":case"morning":case"afternoon":return e;default:{const t=e.substring(0,2),s=e.substring(3,5);return t.match(n)&&s.match(a)?[t,s].join(":"):null}}}(s);if(t){this.state[e]=t;break e}}this.state[e]=void 0}this.#m()}#m(){const e=this.state.strtime,t=this.state.case;if(e){let s=function(e){switch(e){case"fullday":return"Toute la journée";case"afternoon":return"En après-midi";case"morning":return"Au matin";default:return`À ${e}`}}(e);"lowercase"==t&&(s=s.toLowerCase()),this.textContent=s}else this.innerHTML=""}}),customElements.define("app-french-month",class extends HTMLElement{constructor(){super(),this.state={strdate:void 0}}static get observedAttributes(){return["strdate"]}attributeChangedCallback(e,t,s){e:{if(s){const t=r(s);if(t){this.state[e]=t;break e}}this.state[e]=void 0}this.#m()}#m(){const e=this.state.strdate;if(e){const t=function(e){switch(e){case"01":return"Janvier";case"02":return"Février";case"03":return"Mars";case"04":return"Avril";case"05":return"Mai";case"06":return"Juin";case"07":return"Juillet";case"08":return"Août";case"09":return"Septembre";case"10":return"Octobre";case"11":return"Novembre";case"12":return"Décembre";default:return""}}(h(e));this.textContent=t}else this.innerHTML=""}}),customElements.define("app-day-two-digits",class extends HTMLElement{constructor(){super(),this.state={strdate:void 0}}static get observedAttributes(){return["strdate"]}attributeChangedCallback(e,t,s){e:{if(s){const t=r(s);if(t){this.state[e]=t;break e}}this.state[e]=void 0}this.#m()}#m(){const e=this.state.strdate;e?this.textContent=c(e):this.innerHTML=""}}),customElements.define("app-month-two-digits",class extends HTMLElement{constructor(){super(),this.state={strdate:void 0}}static get observedAttributes(){return["strdate"]}attributeChangedCallback(e,t,s){e:{if(s){const t=r(s);if(t){this.state[e]=t;break e}}this.state[e]=void 0}this.#m()}#m(){const e=this.state.strdate;e?this.textContent=h(e):this.innerHTML=""}}),customElements.define("app-year-four-digits",class extends HTMLElement{constructor(){super(),this.state={strdate:void 0}}static get observedAttributes(){return["strdate"]}attributeChangedCallback(e,t,s){e:{if(s){const t=r(s);if(t){this.state[e]=t;break e}}this.state[e]=void 0}this.#m()}#m(){const e=this.state.strdate;e?this.textContent=e.substring(0,4):this.innerHTML=""}}),s(991),s(980);const _=new Map;_.set("appointment_list",(function(e,t){const s=[],i=new Map;s.push("<dl> ");{let n=g(e,"appointments"),a=t;if(n&&"function"==typeof n[Symbol.iterator]){let e=0;for(let t of n){let n=a+"_"+e++;s.push(" <dt "),s.push(` data-uuid="${n+"_uuid96169"}" `);{const e=g(t,"handleClick");null!=e&&i.set(n+"_uuid96169",(t=>t.addEventListener("click",e)))}s.push(" > "),g(t,"isDayOff")&&s.push(" &#9969;&#160; "),s.push("Le <app-long-french-date "),s.push(` data-uuid="${n+"_uuid23170"}" `);{const e=g(t,"strDate");e&&i.set(n+"_uuid23170",(t=>t.setAttribute("strDate",e)))}s.push(' ></app-long-french-date>, <app-long-french-time case="lowercase" '),s.push(` data-uuid="${n+"_uuid74189"}" `);{const e=g(t,"strTime");e&&i.set(n+"_uuid74189",(t=>t.setAttribute("strTime",e)))}s.push(" ></app-long-french-time ><span "),s.push(` data-uuid="${n+"_uuid87917"}" `),g(t,"markUnread")||i.set(n+"_uuid87917",(e=>e.classList.add("hidden"))),s.push(" >*</span></dt> <dd "),s.push(` data-uuid="${n+"_uuid41441"}" `);{const e=g(t,"strDescription")||"";i.set(n+"_uuid41441",(t=>t.textContent=e))}s.push(" ></dd> <dd "),s.push(` data-uuid="${n+"_uuid62312"}" `);{const e=g(t,"strDetails")||"";i.set(n+"_uuid62312",(t=>t.textContent=e))}s.push(" ></dd> ")}}else if(n){let e=n;s.push(" <dt "),s.push(` data-uuid="${t+"_uuid96169"}" `);{const s=g(e,"handleClick");null!=s&&i.set(t+"_uuid96169",(e=>e.addEventListener("click",s)))}s.push(" > "),g(e,"isDayOff")&&s.push(" &#9969;&#160; "),s.push("Le <app-long-french-date "),s.push(` data-uuid="${t+"_uuid23170"}" `);{const s=g(e,"strDate");s&&i.set(t+"_uuid23170",(e=>e.setAttribute("strDate",s)))}s.push(' ></app-long-french-date>, <app-long-french-time case="lowercase" '),s.push(` data-uuid="${t+"_uuid74189"}" `);{const s=g(e,"strTime");s&&i.set(t+"_uuid74189",(e=>e.setAttribute("strTime",s)))}s.push(" ></app-long-french-time ><span "),s.push(` data-uuid="${t+"_uuid87917"}" `),g(e,"markUnread")||i.set(t+"_uuid87917",(e=>e.classList.add("hidden"))),s.push(" >*</span></dt> <dd "),s.push(` data-uuid="${t+"_uuid41441"}" `);{const s=g(e,"strDescription")||"";i.set(t+"_uuid41441",(e=>e.textContent=s))}s.push(" ></dd> <dd "),s.push(` data-uuid="${t+"_uuid62312"}" `);{const s=g(e,"strDetails")||"";i.set(t+"_uuid62312",(e=>e.textContent=s))}s.push(" ></dd> ")}}return s.push(" </dl>"),[s.join(""),i]})),_.set("appointments-search_main",(function(e,t){const s=[],i=new Map;s.push("<nav> <menu> ");{let n=g(e,"menu"),a=t;if(n&&"function"==typeof n[Symbol.iterator]){let e=0;for(let t of n){let n=a+"_"+e++;s.push(" ");{let e=g(t,"back"),a=n;if(e&&"function"==typeof e[Symbol.iterator]){let t=0;for(let n of e){let e=a+"_"+t++;s.push(" <li><a "),s.push(` data-uuid="${e+"_uuid84241"}" `);{const t=g(n,"handleClick");null!=t&&i.set(e+"_uuid84241",(e=>e.addEventListener("click",t)))}s.push(" >&#128197;</a></li> ")}}else if(e){let t=e;s.push(" <li><a "),s.push(` data-uuid="${n+"_uuid84241"}" `);{const e=g(t,"handleClick");null!=e&&i.set(n+"_uuid84241",(t=>t.addEventListener("click",e)))}s.push(" >&#128197;</a></li> ")}}s.push(" ")}}else if(n){let e=n;s.push(" ");{let n=g(e,"back"),a=t;if(n&&"function"==typeof n[Symbol.iterator]){let e=0;for(let t of n){let n=a+"_"+e++;s.push(" <li><a "),s.push(` data-uuid="${n+"_uuid84241"}" `);{const e=g(t,"handleClick");null!=e&&i.set(n+"_uuid84241",(t=>t.addEventListener("click",e)))}s.push(" >&#128197;</a></li> ")}}else if(n){let e=n;s.push(" <li><a "),s.push(` data-uuid="${t+"_uuid84241"}" `);{const s=g(e,"handleClick");null!=s&&i.set(t+"_uuid84241",(e=>e.addEventListener("click",s)))}s.push(" >&#128197;</a></li> ")}}s.push(" ")}}s.push(' </menu> </nav> <h1>Rechercher un rendez-vous</h1> <form class="text-centered" '),s.push(` data-uuid="${t+"_uuid83494"}" `);{const s=g(e,"handleSubmit");null!=s&&i.set(t+"_uuid83494",(e=>e.addEventListener("submit",s)))}s.push(' > <input type="text" name="search" '),s.push(` data-uuid="${t+"_uuid76051"}" `);{const s=g(e,"defaultSearchQuery");s&&i.set(t+"_uuid76051",(e=>e.setAttribute("value",s)))}return s.push(' > <button>Rechercher</button> </form> <div data-id="appointments_list"></div> <hr> <p class="text-centered"><small>Pour le moment, la recherche ne cible que les événements futurs<br>et présente les dix meilleurs résultats.<br>Ces résultats pourraient ne pas tous être pertinents.</small></p>'),[s.join(""),i]})),_.set("authentication-pane",(function(e,t){const s=[],i=new Map;s.push("<app-authentication-form "),s.push(` data-uuid="${t+"_uuid38581"}" `);{const s=g(e,"handleAppAuthentify");null!=s&&i.set(t+"_uuid38581",(e=>e.addEventListener("app-authentify",s)))}{const s=g(e,"username");s&&i.set(t+"_uuid38581",(e=>e.setAttribute("username",s)))}return s.push(' > <form> <input type="text" class="hidden" name="username" autocomplete="username" value="appv1" readonly disabled> <fieldset> <p class="text-centered"> <label>Mot de passe</label>&#160;: <br> <input type="password" name="password" autocomplete="new-password" required> </p> </p> <fieldset class="text-centered"> <p class="text-centered"> <label>Identité</label>&#160;:<br> <select name="identity" required> <option value="" disabled>Identité utilisateur</option> <option value="caroline">Caroline</option> <option value="justin">Justin</option> </select> </p> </fieldset> <hr> <p class="text-right"> <small data-id="error-feedback" class="margin-right"></small> <button>Se connecter</button> </p> </form> </app-authentication-form> '),[s.join(""),i]})),_.set("calendar-grid_main",(function(e,t){const s=[],i=new Map;s.push("<nav> <menu> ");{let n=g(e,"searchNavigation"),a=t;if(n&&"function"==typeof n[Symbol.iterator]){let e=0;for(let t of n){let n=a+"_"+e++;s.push(" <li><a "),s.push(` data-uuid="${n+"_uuid38276"}" `);{const e=g(t,"handleClick");null!=e&&i.set(n+"_uuid38276",(t=>t.addEventListener("click",e)))}s.push(">&#128270;</a></li> ")}}else if(n){let e=n;s.push(" <li><a "),s.push(` data-uuid="${t+"_uuid38276"}" `);{const s=g(e,"handleClick");null!=s&&i.set(t+"_uuid38276",(e=>e.addEventListener("click",s)))}s.push(">&#128270;</a></li> ")}}s.push(" ");{let n=g(e,"unreadNavigation"),a=t;if(n&&"function"==typeof n[Symbol.iterator]){let e=0;for(let t of n){let n=a+"_"+e++;s.push(" <li><a "),s.push(` data-uuid="${n+"_uuid49267"}" `);{const e=g(t,"handleClick");null!=e&&i.set(n+"_uuid49267",(t=>t.addEventListener("click",e)))}s.push(">&#128276; (<span "),s.push(` data-uuid="${n+"_uuid33572"}" `);{const e=g(t,"size")||"";i.set(n+"_uuid33572",(t=>t.textContent=e))}s.push("></span>)</a></li> ")}}else if(n){let e=n;s.push(" <li><a "),s.push(` data-uuid="${t+"_uuid49267"}" `);{const s=g(e,"handleClick");null!=s&&i.set(t+"_uuid49267",(e=>e.addEventListener("click",s)))}s.push(">&#128276; (<span "),s.push(` data-uuid="${t+"_uuid33572"}" `);{const s=g(e,"size")||"";i.set(t+"_uuid33572",(e=>e.textContent=s))}s.push("></span>)</a></li> ")}}s.push(' </menu> </nav> <form> <fieldset> <label for="calendar-grid_main__date_select" >Date d\'intérêt</label>&#160;: <input type="date" id="calendar-grid_main__date_select" '),s.push(` data-uuid="${t+"_uuid20342"}" `);{let s=g(e,"firstDateIncludesController"),n=t;if(s&&"function"==typeof s[Symbol.iterator]){let e=0;for(let t of s){let s=n+"_"+e++;{const e=g(t,"handleChange");null!=e&&i.set(s+"_uuid20342",(t=>t.addEventListener("change",e)))}{const e=g(t,"value");e&&i.set(s+"_uuid20342",(t=>t.setAttribute("value",e)))}}}else if(s){let e=s;{const s=g(e,"handleChange");null!=s&&i.set(t+"_uuid20342",(e=>e.addEventListener("change",s)))}{const s=g(e,"value");s&&i.set(t+"_uuid20342",(e=>e.setAttribute("value",s)))}}}s.push(' > <input type="button" value="Préc." '),s.push(` data-uuid="${t+"_uuid91760"}" `);{let s=g(e,"previousWeekController"),n=t;if(s&&"function"==typeof s[Symbol.iterator]){let e=0;for(let t of s){let s=n+"_"+e++;{const e=g(t,"handleClick");null!=e&&i.set(s+"_uuid91760",(t=>t.addEventListener("click",e)))}}}else if(s){const e=g(s,"handleClick");null!=e&&i.set(t+"_uuid91760",(t=>t.addEventListener("click",e)))}}s.push(' > <input type="button" value="Suiv." '),s.push(` data-uuid="${t+"_uuid70968"}" `);{let s=g(e,"nextWeekController"),n=t;if(s&&"function"==typeof s[Symbol.iterator]){let e=0;for(let t of s){let s=n+"_"+e++;{const e=g(t,"handleClick");null!=e&&i.set(s+"_uuid70968",(t=>t.addEventListener("click",e)))}}}else if(s){const e=g(s,"handleClick");null!=e&&i.set(t+"_uuid70968",(t=>t.addEventListener("click",e)))}}s.push(' > </fieldset> <div data-id="calendar-grid_rows"></div> <div data-id="calendar-weekly-detail"></div> <fieldset> <input type="range" min="3" max="6" list="calendar-rid_main__range_suggestions" '),s.push(` data-uuid="${t+"_uuid56733"}" `);{let s=g(e,"numberOfWeeksController"),n=t;if(s&&"function"==typeof s[Symbol.iterator]){let e=0;for(let t of s){let s=n+"_"+e++;{const e=g(t,"handleChange");null!=e&&i.set(s+"_uuid56733",(t=>t.addEventListener("change",e)))}{const e=g(t,"value");e&&i.set(s+"_uuid56733",(t=>t.setAttribute("value",e)))}}}else if(s){let e=s;{const s=g(e,"handleChange");null!=s&&i.set(t+"_uuid56733",(e=>e.addEventListener("change",s)))}{const s=g(e,"value");s&&i.set(t+"_uuid56733",(e=>e.setAttribute("value",s)))}}}return s.push(' > <datalist id="calendar-rid_main__range_suggestions"> <option value="3">Vue par semaine</option> <option value="6">Vue mensuelle élargie</option> </datalist> </fieldset> </form>'),[s.join(""),i]})),_.set("calendar-grid_rows",(function(e,t){const s=[],i=new Map;s.push("<table> <thead> <tr> <th><abbr>Lun.</abbr></th> <th><abbr>Mar.</abbr></th> <th><abbr>Mer.</abbr></th> <th><abbr>Jeu.</abbr></th> <th><abbr>Ven.</abbr></th> <th><abbr>Sam.</abbr></th> <th><abbr>Dim.</abbr></th> </tr> </thead> ");{let n=g(e,"blocks"),a=t;if(n&&"function"==typeof n[Symbol.iterator]){let e=0;for(let t of n){let n=a+"_"+e++;s.push(' <tbody> <tr class="bar"> <th colspan="7" ><app-french-month '),s.push(` data-uuid="${n+"_uuid36146"}" `);{const e=g(t,"strDate");e&&i.set(n+"_uuid36146",(t=>t.setAttribute("strDate",e)))}s.push("></app-french-month> </th> </tr> ");{let e=g(t,"rows"),a=n;if(e&&"function"==typeof e[Symbol.iterator]){let t=0;for(let n of e){let e=a+"_"+t++;s.push(" <tr> ");{let t=g(n,"cols"),a=e;if(t&&"function"==typeof t[Symbol.iterator]){let e=0;for(let n of t){let t=a+"_"+e++;s.push(" <td "),s.push(` data-uuid="${t+"_uuid47062"}" `);{const e=g(n,"handleClick");null!=e&&i.set(t+"_uuid47062",(t=>t.addEventListener("click",e)))}if(g(n,"hasAppointments")&&i.set(t+"_uuid47062",(e=>e.classList.add("hasAppointments"))),g(n,"hasNoUnread")&&i.set(t+"_uuid47062",(e=>e.classList.add("hasNoUnread"))),g(n,"isToday")&&i.set(t+"_uuid47062",(e=>e.classList.add("isToday"))),g(n,"isFocus")&&i.set(t+"_uuid47062",(e=>e.classList.add("isFocus"))),s.push(" >"),!g(n,"isDayOff")){s.push("<app-day-two-digits "),s.push(` data-uuid="${t+"_uuid62360"}" `);{const e=g(n,"strDate");e&&i.set(t+"_uuid62360",(t=>t.setAttribute("strDate",e)))}s.push("></app-day-two-digits >")}g(n,"isDayOff")&&s.push("&#9969;"),s.push('<span class="hide-when-hasNoUnread">*</span></td> ')}}else if(t){let n=t;s.push(" <td "),s.push(` data-uuid="${e+"_uuid47062"}" `);{const t=g(n,"handleClick");null!=t&&i.set(e+"_uuid47062",(e=>e.addEventListener("click",t)))}if(g(n,"hasAppointments")&&i.set(e+"_uuid47062",(e=>e.classList.add("hasAppointments"))),g(n,"hasNoUnread")&&i.set(e+"_uuid47062",(e=>e.classList.add("hasNoUnread"))),g(n,"isToday")&&i.set(e+"_uuid47062",(e=>e.classList.add("isToday"))),g(n,"isFocus")&&i.set(e+"_uuid47062",(e=>e.classList.add("isFocus"))),s.push(" >"),!g(n,"isDayOff")){s.push("<app-day-two-digits "),s.push(` data-uuid="${e+"_uuid62360"}" `);{const t=g(n,"strDate");t&&i.set(e+"_uuid62360",(e=>e.setAttribute("strDate",t)))}s.push("></app-day-two-digits >")}g(n,"isDayOff")&&s.push("&#9969;"),s.push('<span class="hide-when-hasNoUnread">*</span></td> ')}}s.push(" </tr> ")}}else if(e){let t=e;s.push(" <tr> ");{let e=g(t,"cols"),a=n;if(e&&"function"==typeof e[Symbol.iterator]){let t=0;for(let n of e){let e=a+"_"+t++;s.push(" <td "),s.push(` data-uuid="${e+"_uuid47062"}" `);{const t=g(n,"handleClick");null!=t&&i.set(e+"_uuid47062",(e=>e.addEventListener("click",t)))}if(g(n,"hasAppointments")&&i.set(e+"_uuid47062",(e=>e.classList.add("hasAppointments"))),g(n,"hasNoUnread")&&i.set(e+"_uuid47062",(e=>e.classList.add("hasNoUnread"))),g(n,"isToday")&&i.set(e+"_uuid47062",(e=>e.classList.add("isToday"))),g(n,"isFocus")&&i.set(e+"_uuid47062",(e=>e.classList.add("isFocus"))),s.push(" >"),!g(n,"isDayOff")){s.push("<app-day-two-digits "),s.push(` data-uuid="${e+"_uuid62360"}" `);{const t=g(n,"strDate");t&&i.set(e+"_uuid62360",(e=>e.setAttribute("strDate",t)))}s.push("></app-day-two-digits >")}g(n,"isDayOff")&&s.push("&#9969;"),s.push('<span class="hide-when-hasNoUnread">*</span></td> ')}}else if(e){let t=e;s.push(" <td "),s.push(` data-uuid="${n+"_uuid47062"}" `);{const e=g(t,"handleClick");null!=e&&i.set(n+"_uuid47062",(t=>t.addEventListener("click",e)))}if(g(t,"hasAppointments")&&i.set(n+"_uuid47062",(e=>e.classList.add("hasAppointments"))),g(t,"hasNoUnread")&&i.set(n+"_uuid47062",(e=>e.classList.add("hasNoUnread"))),g(t,"isToday")&&i.set(n+"_uuid47062",(e=>e.classList.add("isToday"))),g(t,"isFocus")&&i.set(n+"_uuid47062",(e=>e.classList.add("isFocus"))),s.push(" >"),!g(t,"isDayOff")){s.push("<app-day-two-digits "),s.push(` data-uuid="${n+"_uuid62360"}" `);{const e=g(t,"strDate");e&&i.set(n+"_uuid62360",(t=>t.setAttribute("strDate",e)))}s.push("></app-day-two-digits >")}g(t,"isDayOff")&&s.push("&#9969;"),s.push('<span class="hide-when-hasNoUnread">*</span></td> ')}}s.push(" </tr> ")}}s.push(" </tbody> ")}}else if(n){let e=n;s.push(' <tbody> <tr class="bar"> <th colspan="7" ><app-french-month '),s.push(` data-uuid="${t+"_uuid36146"}" `);{const s=g(e,"strDate");s&&i.set(t+"_uuid36146",(e=>e.setAttribute("strDate",s)))}s.push("></app-french-month> </th> </tr> ");{let n=g(e,"rows"),a=t;if(n&&"function"==typeof n[Symbol.iterator]){let e=0;for(let t of n){let n=a+"_"+e++;s.push(" <tr> ");{let e=g(t,"cols"),a=n;if(e&&"function"==typeof e[Symbol.iterator]){let t=0;for(let n of e){let e=a+"_"+t++;s.push(" <td "),s.push(` data-uuid="${e+"_uuid47062"}" `);{const t=g(n,"handleClick");null!=t&&i.set(e+"_uuid47062",(e=>e.addEventListener("click",t)))}if(g(n,"hasAppointments")&&i.set(e+"_uuid47062",(e=>e.classList.add("hasAppointments"))),g(n,"hasNoUnread")&&i.set(e+"_uuid47062",(e=>e.classList.add("hasNoUnread"))),g(n,"isToday")&&i.set(e+"_uuid47062",(e=>e.classList.add("isToday"))),g(n,"isFocus")&&i.set(e+"_uuid47062",(e=>e.classList.add("isFocus"))),s.push(" >"),!g(n,"isDayOff")){s.push("<app-day-two-digits "),s.push(` data-uuid="${e+"_uuid62360"}" `);{const t=g(n,"strDate");t&&i.set(e+"_uuid62360",(e=>e.setAttribute("strDate",t)))}s.push("></app-day-two-digits >")}g(n,"isDayOff")&&s.push("&#9969;"),s.push('<span class="hide-when-hasNoUnread">*</span></td> ')}}else if(e){let t=e;s.push(" <td "),s.push(` data-uuid="${n+"_uuid47062"}" `);{const e=g(t,"handleClick");null!=e&&i.set(n+"_uuid47062",(t=>t.addEventListener("click",e)))}if(g(t,"hasAppointments")&&i.set(n+"_uuid47062",(e=>e.classList.add("hasAppointments"))),g(t,"hasNoUnread")&&i.set(n+"_uuid47062",(e=>e.classList.add("hasNoUnread"))),g(t,"isToday")&&i.set(n+"_uuid47062",(e=>e.classList.add("isToday"))),g(t,"isFocus")&&i.set(n+"_uuid47062",(e=>e.classList.add("isFocus"))),s.push(" >"),!g(t,"isDayOff")){s.push("<app-day-two-digits "),s.push(` data-uuid="${n+"_uuid62360"}" `);{const e=g(t,"strDate");e&&i.set(n+"_uuid62360",(t=>t.setAttribute("strDate",e)))}s.push("></app-day-two-digits >")}g(t,"isDayOff")&&s.push("&#9969;"),s.push('<span class="hide-when-hasNoUnread">*</span></td> ')}}s.push(" </tr> ")}}else if(n){let e=n;s.push(" <tr> ");{let n=g(e,"cols"),a=t;if(n&&"function"==typeof n[Symbol.iterator]){let e=0;for(let t of n){let n=a+"_"+e++;s.push(" <td "),s.push(` data-uuid="${n+"_uuid47062"}" `);{const e=g(t,"handleClick");null!=e&&i.set(n+"_uuid47062",(t=>t.addEventListener("click",e)))}if(g(t,"hasAppointments")&&i.set(n+"_uuid47062",(e=>e.classList.add("hasAppointments"))),g(t,"hasNoUnread")&&i.set(n+"_uuid47062",(e=>e.classList.add("hasNoUnread"))),g(t,"isToday")&&i.set(n+"_uuid47062",(e=>e.classList.add("isToday"))),g(t,"isFocus")&&i.set(n+"_uuid47062",(e=>e.classList.add("isFocus"))),s.push(" >"),!g(t,"isDayOff")){s.push("<app-day-two-digits "),s.push(` data-uuid="${n+"_uuid62360"}" `);{const e=g(t,"strDate");e&&i.set(n+"_uuid62360",(t=>t.setAttribute("strDate",e)))}s.push("></app-day-two-digits >")}g(t,"isDayOff")&&s.push("&#9969;"),s.push('<span class="hide-when-hasNoUnread">*</span></td> ')}}else if(n){let e=n;s.push(" <td "),s.push(` data-uuid="${t+"_uuid47062"}" `);{const s=g(e,"handleClick");null!=s&&i.set(t+"_uuid47062",(e=>e.addEventListener("click",s)))}if(g(e,"hasAppointments")&&i.set(t+"_uuid47062",(e=>e.classList.add("hasAppointments"))),g(e,"hasNoUnread")&&i.set(t+"_uuid47062",(e=>e.classList.add("hasNoUnread"))),g(e,"isToday")&&i.set(t+"_uuid47062",(e=>e.classList.add("isToday"))),g(e,"isFocus")&&i.set(t+"_uuid47062",(e=>e.classList.add("isFocus"))),s.push(" >"),!g(e,"isDayOff")){s.push("<app-day-two-digits "),s.push(` data-uuid="${t+"_uuid62360"}" `);{const s=g(e,"strDate");s&&i.set(t+"_uuid62360",(e=>e.setAttribute("strDate",s)))}s.push("></app-day-two-digits >")}g(e,"isDayOff")&&s.push("&#9969;"),s.push('<span class="hide-when-hasNoUnread">*</span></td> ')}}s.push(" </tr> ")}}s.push(" </tbody> ")}}return s.push(" </table>"),[s.join(""),i]})),_.set("calendar-mutation-form",(function(e,t){const s=[],i=new Map;s.push("<h1 "),s.push(` data-uuid="${t+"_uuid92492"}" `);{const s=g(e,"pageTitle")||"";i.set(t+"_uuid92492",(e=>e.textContent=s))}s.push(" ></h1> <app-calendar-mutation-form "),s.push(` data-uuid="${t+"_uuid50026"}" `);{const s=g(e,"preferred-date");s&&i.set(t+"_uuid50026",(e=>e.setAttribute("preferred-date",s)))}{const s=g(e,"preferred-time");s&&i.set(t+"_uuid50026",(e=>e.setAttribute("preferred-time",s)))}{const s=g(e,"preferred-description");s&&i.set(t+"_uuid50026",(e=>e.setAttribute("preferred-description",s)))}{const s=g(e,"preferred-details");s&&i.set(t+"_uuid50026",(e=>e.setAttribute("preferred-details",s)))}{const s=g(e,"preferred-is-day-off");s&&i.set(t+"_uuid50026",(e=>e.setAttribute("preferred-is-day-off",s)))}{const s=g(e,"handleAppCalendarMutationFormChange");null!=s&&i.set(t+"_uuid50026",(e=>e.addEventListener("app-calendar-mutation-form-change",s)))}{const s=g(e,"handleAppCalendarMutationFormSubmit");null!=s&&i.set(t+"_uuid50026",(e=>e.addEventListener("app-calendar-mutation-form-submit",s)))}s.push(' > <form> <fieldset class="multi-column-2"> <div class="column"> <p class="text-centered"> <label>Jour du rendez-vous</label>:&#160;<br ><input type="date" name="dateController" required> </p> <p class="text-centered"> <input type="checkbox" name="isDayOffController" ><label>Jour férié&#160;?&#160;&#9969;</label> </p> </div> <div class="column"> <p class="text-centered"> <label>Plage horaire</label>:&#160;<br ><select name="timeRangeController"> <option value="">Ponctuel</option> <option value="fullday">Toute la journée</option> <option value="morning">La matinée</option> <option value="afternoon">L\'après-midi</option> </select> </p> <p class="text-centered"> <label>Heure du rendez-vous</label>:&#160;<br ><input type="time" name="timeNumericController"> </p> </div> </fieldset> <aside data-id="conflicts_container" class="error-box hidden"> <p>&#9940; Les rendez-vous suivants sont en conflit:</p> <div data-id="appointments_list"></div> </aside> <fieldset> <p class="text-centered"> <label>Description du rendez-vous.</label><br> <small>Un texte succinct permet d\'améliorer la recherche par mots-clé.</small> <br> <textarea name="descriptionController" cols="40" rows="4" required></textarea> </p> <p class="text-centered"> <label>Commentaires</label><br> <small>(lieu, papiers à apporter, &hellip;).</small> <br> <textarea name="detailsController" cols="40" rows="4"></textarea> </p> </fieldset> <hr> <div class="multi-column-2"> <p class="column"> '),g(e,"allowCancel")&&s.push(' <label><input type="checkbox" name="cancelController">Annuler le rendez-vous</label> '),s.push(' </p> <p class="column text-right"> <button '),s.push(` data-uuid="${t+"_uuid79780"}" `);{const s=g(e,"submitText")||"";i.set(t+"_uuid79780",(e=>e.textContent=s))}return s.push("></button> </p> </div> </form> </app-calendar-mutation-form>"),[s.join(""),i]})),_.set("calendar-mutation-form_conflicts",(function(e,t){const s=[],i=new Map;s.push("<div "),s.push(` data-uuid="${t+"_uuid15513"}" `),g(e,"appointments")||i.set(t+"_uuid15513",(e=>e.classList.add("hidden"))),s.push(" > <hr> <p>Les rendez-vous suivants sont en conflit horaire:</p> <dl> ");{let n=g(e,"appointments"),a=t;if(n&&"function"==typeof n[Symbol.iterator]){let e=0;for(let t of n){let n=a+"_"+e++;s.push(" <dt ><app-long-french-time "),s.push(` data-uuid="${n+"_uuid12198"}" `);{const e=g(t,"strTime");e&&i.set(n+"_uuid12198",(t=>t.setAttribute("strTime",e)))}s.push(" ></app-long-french-time ></dt> <dd "),s.push(` data-uuid="${n+"_uuid24751"}" `);{const e=g(t,"strDescription")||"";i.set(n+"_uuid24751",(t=>t.textContent=e))}s.push(" ></dd> ")}}else if(n){let e=n;s.push(" <dt ><app-long-french-time "),s.push(` data-uuid="${t+"_uuid12198"}" `);{const s=g(e,"strTime");s&&i.set(t+"_uuid12198",(e=>e.setAttribute("strTime",s)))}s.push(" ></app-long-french-time ></dt> <dd "),s.push(` data-uuid="${t+"_uuid24751"}" `);{const s=g(e,"strDescription")||"";i.set(t+"_uuid24751",(e=>e.textContent=s))}s.push(" ></dd> ")}}return s.push(" </dl> </div> "),[s.join(""),i]})),_.set("day-appointments_main",(function(e,t){const s=[],i=new Map;s.push("<nav> <menu> ");{let n=g(e,"menu"),a=t;if(n&&"function"==typeof n[Symbol.iterator]){let e=0;for(let t of n){let n=a+"_"+e++;s.push(" ");{let e=g(t,"back"),a=n;if(e&&"function"==typeof e[Symbol.iterator]){let t=0;for(let n of e){let e=a+"_"+t++;s.push(" <li><a "),s.push(` data-uuid="${e+"_uuid74286"}" `);{const t=g(n,"handleClick");null!=t&&i.set(e+"_uuid74286",(e=>e.addEventListener("click",t)))}s.push(" >&#128197;</a></li> ")}}else if(e){let t=e;s.push(" <li><a "),s.push(` data-uuid="${n+"_uuid74286"}" `);{const e=g(t,"handleClick");null!=e&&i.set(n+"_uuid74286",(t=>t.addEventListener("click",e)))}s.push(" >&#128197;</a></li> ")}}s.push(" ");{let e=g(t,"create"),a=n;if(e&&"function"==typeof e[Symbol.iterator]){let t=0;for(let n of e){let e=a+"_"+t++;s.push(" <li><a "),s.push(` data-uuid="${e+"_uuid67852"}" `);{const t=g(n,"handleClick");null!=t&&i.set(e+"_uuid67852",(e=>e.addEventListener("click",t)))}s.push(" >&#10133;</a></li> ")}}else if(e){let t=e;s.push(" <li><a "),s.push(` data-uuid="${n+"_uuid67852"}" `);{const e=g(t,"handleClick");null!=e&&i.set(n+"_uuid67852",(t=>t.addEventListener("click",e)))}s.push(" >&#10133;</a></li> ")}}s.push(" ")}}else if(n){let e=n;s.push(" ");{let n=g(e,"back"),a=t;if(n&&"function"==typeof n[Symbol.iterator]){let e=0;for(let t of n){let n=a+"_"+e++;s.push(" <li><a "),s.push(` data-uuid="${n+"_uuid74286"}" `);{const e=g(t,"handleClick");null!=e&&i.set(n+"_uuid74286",(t=>t.addEventListener("click",e)))}s.push(" >&#128197;</a></li> ")}}else if(n){let e=n;s.push(" <li><a "),s.push(` data-uuid="${t+"_uuid74286"}" `);{const s=g(e,"handleClick");null!=s&&i.set(t+"_uuid74286",(e=>e.addEventListener("click",s)))}s.push(" >&#128197;</a></li> ")}}s.push(" ");{let n=g(e,"create"),a=t;if(n&&"function"==typeof n[Symbol.iterator]){let e=0;for(let t of n){let n=a+"_"+e++;s.push(" <li><a "),s.push(` data-uuid="${n+"_uuid67852"}" `);{const e=g(t,"handleClick");null!=e&&i.set(n+"_uuid67852",(t=>t.addEventListener("click",e)))}s.push(" >&#10133;</a></li> ")}}else if(n){let e=n;s.push(" <li><a "),s.push(` data-uuid="${t+"_uuid67852"}" `);{const s=g(e,"handleClick");null!=s&&i.set(t+"_uuid67852",(e=>e.addEventListener("click",s)))}s.push(" >&#10133;</a></li> ")}}s.push(" ")}}s.push(" </menu> </nav> <h1>Rendez-vous du <app-long-french-date "),s.push(` data-uuid="${t+"_uuid26354"}" `);{const s=g(e,"strDate");s&&i.set(t+"_uuid26354",(e=>e.setAttribute("strDate",s)))}return s.push(" ></app-long-french-date> </h1> "),g(e,"hasAppointments")&&s.push(' <div data-id="appointments_list"></div> '),g(e,"hasAppointments")||s.push(" <p>Aucun rendez-vous prévu à cette date.</p> "),[s.join(""),i]})),_.set("unread-appointments_main",(function(e,t){const s=[],i=new Map;s.push("<nav> <menu> ");{let n=g(e,"menu"),a=t;if(n&&"function"==typeof n[Symbol.iterator]){let e=0;for(let t of n){let n=a+"_"+e++;s.push(" ");{let e=g(t,"back"),a=n;if(e&&"function"==typeof e[Symbol.iterator]){let t=0;for(let n of e){let e=a+"_"+t++;s.push(" <li><a "),s.push(` data-uuid="${e+"_uuid35318"}" `);{const t=g(n,"handleClick");null!=t&&i.set(e+"_uuid35318",(e=>e.addEventListener("click",t)))}s.push(" >&#128197;</a></li> ")}}else if(e){let t=e;s.push(" <li><a "),s.push(` data-uuid="${n+"_uuid35318"}" `);{const e=g(t,"handleClick");null!=e&&i.set(n+"_uuid35318",(t=>t.addEventListener("click",e)))}s.push(" >&#128197;</a></li> ")}}s.push(" ");{let e=g(t,"markRead"),a=n;if(e&&"function"==typeof e[Symbol.iterator]){let t=0;for(let n of e){let e=a+"_"+t++;s.push(" <li><a "),s.push(` data-uuid="${e+"_uuid81633"}" `);{const t=g(n,"handleClick");null!=t&&i.set(e+"_uuid81633",(e=>e.addEventListener("click",t)))}s.push(" >&#9989;</a></li> ")}}else if(e){let t=e;s.push(" <li><a "),s.push(` data-uuid="${n+"_uuid81633"}" `);{const e=g(t,"handleClick");null!=e&&i.set(n+"_uuid81633",(t=>t.addEventListener("click",e)))}s.push(" >&#9989;</a></li> ")}}s.push(" ");{let e=g(t,"create"),a=n;if(e&&"function"==typeof e[Symbol.iterator]){let t=0;for(let n of e){let e=a+"_"+t++;s.push(" <li><a "),s.push(` data-uuid="${e+"_uuid22953"}" `);{const t=g(n,"handleClick");null!=t&&i.set(e+"_uuid22953",(e=>e.addEventListener("click",t)))}s.push(" >&#10133;</a></li> ")}}else if(e){let t=e;s.push(" <li><a "),s.push(` data-uuid="${n+"_uuid22953"}" `);{const e=g(t,"handleClick");null!=e&&i.set(n+"_uuid22953",(t=>t.addEventListener("click",e)))}s.push(" >&#10133;</a></li> ")}}s.push(" ")}}else if(n){let e=n;s.push(" ");{let n=g(e,"back"),a=t;if(n&&"function"==typeof n[Symbol.iterator]){let e=0;for(let t of n){let n=a+"_"+e++;s.push(" <li><a "),s.push(` data-uuid="${n+"_uuid35318"}" `);{const e=g(t,"handleClick");null!=e&&i.set(n+"_uuid35318",(t=>t.addEventListener("click",e)))}s.push(" >&#128197;</a></li> ")}}else if(n){let e=n;s.push(" <li><a "),s.push(` data-uuid="${t+"_uuid35318"}" `);{const s=g(e,"handleClick");null!=s&&i.set(t+"_uuid35318",(e=>e.addEventListener("click",s)))}s.push(" >&#128197;</a></li> ")}}s.push(" ");{let n=g(e,"markRead"),a=t;if(n&&"function"==typeof n[Symbol.iterator]){let e=0;for(let t of n){let n=a+"_"+e++;s.push(" <li><a "),s.push(` data-uuid="${n+"_uuid81633"}" `);{const e=g(t,"handleClick");null!=e&&i.set(n+"_uuid81633",(t=>t.addEventListener("click",e)))}s.push(" >&#9989;</a></li> ")}}else if(n){let e=n;s.push(" <li><a "),s.push(` data-uuid="${t+"_uuid81633"}" `);{const s=g(e,"handleClick");null!=s&&i.set(t+"_uuid81633",(e=>e.addEventListener("click",s)))}s.push(" >&#9989;</a></li> ")}}s.push(" ");{let n=g(e,"create"),a=t;if(n&&"function"==typeof n[Symbol.iterator]){let e=0;for(let t of n){let n=a+"_"+e++;s.push(" <li><a "),s.push(` data-uuid="${n+"_uuid22953"}" `);{const e=g(t,"handleClick");null!=e&&i.set(n+"_uuid22953",(t=>t.addEventListener("click",e)))}s.push(" >&#10133;</a></li> ")}}else if(n){let e=n;s.push(" <li><a "),s.push(` data-uuid="${t+"_uuid22953"}" `);{const s=g(e,"handleClick");null!=s&&i.set(t+"_uuid22953",(e=>e.addEventListener("click",s)))}s.push(" >&#10133;</a></li> ")}}s.push(" ")}}return s.push(" </menu> </nav> <h1>Rendez-vous non lus</h1> "),g(e,"hasAppointments")&&s.push(' <div data-id="appointments_list"></div> '),g(e,"hasAppointments")||s.push(" <p>Aucun rendez-vous non lus.</p> "),[s.join(""),i]}));const w=Object.freeze(new Map([["click","handleClick"],["submit","handleSubmit"],["change","handleChange"],["app-authentify","handleAppAuthentify"],["app-calendar-mutation-form-change","handleAppCalendarMutationFormChange"],["app-calendar-mutation-form-submit","handleAppCalendarMutationFormSubmit"]])),C=10,k="{",E="}",D="#",A="?",L=":",T="$",O="%",S="|",x='"',$="/",N="data-uuid",M=1e5,I=/\s\s+/g;function U(e){for(;;){const t="uuid"+Math.round(Math.random()*M);if(!e.has(t))return e.add(t),t}}function W(e,t,s){if(s)return W(e,new Set(t),!1);const i={children:[],symbol:"root"},n=t,a=[i];for(let t=0;t<e.length;){if(a.length>=C)throw"Template is too deep";const s=e.indexOf(k,t),i=a.pop();if(!i)throw"Exhausted ancestor chain";if(s>=0){if(t+1<s){const n=e.substring(t,s).replace(I," ");e:{if(" "===n){if("uuid"==i.symbol)break e;for(let e=a.length;--e>=0;)if("uuid"==a[e].symbol)break e}const e={symbol:"fragment",slice:n};i.children.push(e)}}const r=e.indexOf(E,s);if(-1==r){let t=0;for(const i of e.substring(0,s))"\n"==i&&(t+=1);throw`No closing symbol found for opening block; \n                        around line ${t}`}const u=e.substring(s+k.length+1,r).trim();switch(e[s+k.length]){case D:{const e=u?{symbol:"section",variable:u,children:[]}:{symbol:"uuid",elementUuid:U(n),children:[]};i.children.push(e),a.push(i),a.push(e)}break;case A:{const e={symbol:"if",variable:u,children:[]};i.children.push(e),a.push(i),a.push(e)}break;case L:{const e={symbol:"else",variable:u,children:[]};i.children.push(e),a.push(i),a.push(e)}break;case O:{const e={symbol:"event",variable:u};i.children.push(e),a.push(i)}break;case T:{const e={symbol:"textContent",variable:u};i.children.push(e),a.push(i)}break;case $:break;default:{const t=e.substring(s+k.length,r).trim(),n=t.indexOf(S);if(-1==n){let t=0;for(const i of e.substring(0,s))"\n"==i&&(t+=1);throw`No pipe delimiter found,\n                            though we reach the end of potential blocks;\n                            around line ${t}`}const u=t.substring(n+S.length,t.length).trim(),o=t.substring(0,n).trim();let l;l=o.startsWith(x)?{symbol:"hardAttribute",value:o.substring(1,o.length).trim(),pipe:u}:{symbol:"dynamicAttribute",variable:o,pipe:u},i.children.push(l),a.push(i)}}t=r+E.length}else{const s={symbol:"fragment",slice:e.substring(t,e.length).replace(I," ")};i.children.push(s),t=e.length}}return i}function z(e,t){switch(e.symbol){case"fragment":return new P({kind:0,fragment:e.slice});case"root":throw"Root must be handled differently,\n                as it returns string or side effects";case"uuid":return new R(e,t);case"textContent":{const s=e.variable;if(t&&Object.hasOwn(t,s)){const e=t[s];return null!=e?new P({kind:2,identifier:"",sideEffect:t=>t.textContent=e,cancelEffect:e=>e.textContent=""}):new H}throw`Scope is undefined or does not exhibit\n                    the expected handler for event ${s}`}case"hardAttribute":case"dynamicAttribute":{const s=e.pipe;let i;if("dynamicAttribute"==e.symbol){const s=e.variable;if(!t||!Object.hasOwn(t,s))throw`Scope is undefined or does not exhibit\n                        the expected variable ${s}`;i=t[s]}else i=e.value;return"class"===s?null!=i?new P({kind:2,identifier:"",sideEffect:e=>e.classList.add(i),cancelEffect:e=>e.classList.remove(i)}):new H:null!=i?new P({kind:2,identifier:"",sideEffect:e=>e.setAttribute(s,i),cancelEffect:e=>e.removeAttribute(s)}):new H}case"event":{const s=e.variable,i=w.get(s);if(!t||!i||!Object.hasOwn(t,i))throw`Scope is undefined or does not exhibit\n                    the expected handler for event ${s}`;const n=t[i];return null!=n?new P({kind:2,identifier:"",sideEffect:e=>e.addEventListener(s,n),cancelEffect:e=>e.removeEventListener(s,n)}):new H}case"section":case"if":case"else":if(!t||!Object.hasOwn(t,e.variable))throw`Scope is undefined or does not exhibit\n                    the expected block variable ${e.variable}`;{const s=t[e.variable];switch(e.symbol){case"section":if(s){const t=s[Symbol.iterator];return"function"==typeof t?new q(e,t.bind(s)()):new j(e,s)}return new H;case"if":return s?new j(e,t,"t"):new H;case"else":return s?new H:new j(e,t,"f")}}break;default:throw"Plant processor cannot be used in provided context"}}class H{next=()=>({done:!0,value:null})}class j{constructor(e,t,s){this.scope=t,this.prefix=s,this.children=e.children,this.readCursor=0,this.delegation=new H}next=()=>{for(;;){const{done:e,value:t}=this.delegation.next();if(!e){if(this.prefix&&(1==t.kind||2==t.kind)){const e=[this.prefix,t.identifier].filter(Boolean).join("_");return{value:{...t,identifier:e}}}return{value:t}}if(!(this.readCursor<this.children.length))break;{const e=this.children[this.readCursor];this.readCursor+=1,this.delegation=z(e,this.scope)}}return{done:!0,value:null}}}class R{constructor(e,t){this.elementUuid=e.elementUuid,this.identificationSent=!1,this.delegation=new j(e,t)}next=()=>{if(!this.identificationSent)return this.identificationSent=!0,{value:{kind:1,identifier:this.elementUuid}};for(;;){const{done:e,value:t}=this.delegation.next();if(e)return{done:e,value:null};if(2==t.kind)return{value:{kind:2,identifier:this.elementUuid,sideEffect:t.sideEffect,cancelEffect:t.cancelEffect}};throw`Unexpected value emission of kind ${t.kind}\n                            inside of identifier block ${this.elementUuid}`}}}class q{constructor(e,t){this.plant=e,this.generator=t,this.delegation=null,this.counter=-1}next=()=>{if(this.delegation){const{done:e,value:t}=this.delegation.next();if(!e)return{value:t}}for(;;){const e=this.generator.next();if(e.done)return{done:!0,value:null};{this.counter+=1,this.delegation=new j(this.plant,e.value,String(this.counter));const{done:t,value:s}=this.delegation.next();if(t)continue;return{value:s}}}}}class P{constructor(e){this.segment=e,this.done=!1}next=()=>this.done?{done:!0,value:null}:(this.done=!0,{value:this.segment})}class F{constructor(e,t){this.delegation=new j(e,t)}next=()=>{const{done:e,value:t}=this.delegation.next();if(e)return{done:e,value:void 0};if(0===t.kind)return{value:t.fragment};{const e=`id${t.identifier}`;return 1===t.kind?{value:` ${N}="${e}" `}:{value:{...t,identifier:e}}}};[Symbol.iterator]=()=>this}function B(e,t,s){const i=W(e,t||new Set,s||!1);return function*(e,t){const s=new Map;{const n=[];for(const e of new F(i,t))if("string"==typeof e)n.push(e);else{const{identifier:t,sideEffect:i,cancelEffect:n}=e;s.has(t)||s.set(t,[]),s.get(t).push({sideEffect:i,cancelEffect:n})}e.innerHTML=n.join("")}for(;;){for(const[t,i]of s){const s=e.querySelector(`*[${N}=${t}]`);for(const e of i)e.sideEffect(s),delete e.sideEffect}const t=yield;for(const[t,i]of s){const s=e.querySelector(`*[${N}=${t}]`);for(;;){const e=i.pop();if(!e)break;e.cancelEffect(s)}}if(!t)break;for(const e of new F(i,t))if("string"!=typeof e){const{identifier:t,sideEffect:i,cancelEffect:n}=e;s.has(t)||s.set(t,[]),s.get(t).push({sideEffect:i,cancelEffect:n})}}}}function J(e,t,s){const i=window.DOMPurify;if(i){const n=B(e,t,s);return(e,t)=>{const s=document.createElement("div");n(s,t).next(),i.sanitize(s,{IN_PLACE:!0,CUSTOM_ELEMENT_HANDLING:{tagNameCheck:e=>!!e.match(/^app-/),attributeNameCheck:()=>!0,allowCustomizedBuiltInElements:!0}}),e.innnerHTML="",e.appendChild(s)}}throw"DOMPurify library is required to use this method."}function Q(e,t,s){const{numberOfWeeks:i,todayStrDate:n,focusStrDate:a}=e,r=function(e,t,s){const i=[];{const n=7*t;let a=function(e){const t=-(function(e){return new Date(e).getUTCDay()}(e)+6)%7;return t?d(e,{dayShift:t}):e}(l(e));for(let e=0;e<n;e++)i.push(o(a)),a=d(a);if(s){const e=h(i[i.length-1]);for(;;){const t=o(a);if(h(t)!=e)break;i.push(t),a=d(a)}}}const n=[];{let t=h(e);for(let s=0;s<i.length;s++){const a=i[s];if(a<e)h(a)!=t?n.push(void 0):n.push(a);else{const e=h(a);if(t!==e&&s%7)for(let e=0;e<7;e++)n.push(void 0);t=e,n.push(a)}}for(;n.length%7;)n.push(void 0)}const a=[];for(let e=0;e<n.length;){const t=n[e];0!=e&&t&&"01"!==c(t)||a.push([]),a[a.length-1].push(n.slice(e,e+=7))}return a}(a,Math.min(5,i),6==i);return{blocks:r.map((e=>({rows:e.map((e=>({cols:e.map((e=>function(e,t,s){const{strDate:i,todayStrDate:n,focusStrDate:a}=e;if(i){const e=new Map(t.get(i));let r=!1,u=!1,o=!1;for(const{unread:t,isDayOff:s}of e.values())u=!0,r=r||t,o=o||s;return{strDate:i,hasAppointments:u,hasNoUnread:!r,inFocusMonth:h(i)==h(a),isToday:i==n,isFocus:i==a,isDayOff:o,handleClick:()=>{s({url:"/appointments/day/",parameters:{strDate:i}})}}}return{strDate:void 0,hasAppointments:!1,hasNoUnread:!0,inFocusMonth:!0,isToday:!1,isFocus:!1,isDayOff:!1,handleClick:void 0}}({strDate:e,todayStrDate:n,focusStrDate:a},t,s)))}))),strDate:e[0].find(Boolean)})))}}function G({numberOfWeeks:e,firstWeekIncludes:t},s){return{handleChange:e=>{s({url:"/calendar-grid/",parameters:{firstWeekIncludes:t,numberOfWeeks:e.target.value}})},value:e}}function K({dateTime:e,numberOfWeeks:t},s){return{handleChange:e=>{e.target.value&&s({url:"/calendar-grid/",parameters:{firstWeekIncludes:o(e.target.value),numberOfWeeks:t}})},value:o(e)}}function V({dateTime:e,numberOfWeeks:t},s){return{handleClick:()=>{s({url:"/calendar-grid/",parameters:{firstWeekIncludes:o(d(e,{weekShift:1})),numberOfWeeks:t}})}}}function X({dateTime:e,numberOfWeeks:t},s){return{handleClick:()=>{s({url:"/calendar-grid/",parameters:{firstWeekIncludes:o(d(e,{weekShift:-1})),numberOfWeeks:t}})}}}function Y({newEvents:e},t){if(e.length)return{size:e.length,handleClick:()=>{t({url:"/appointments/unread/",parameters:{}})}}}const Z="calendar-grid_main",ee="calendar-grid_rows";function te(){const e=new Set,t=document.getElementById(Z),s=document.getElementById(ee),i=J(t.innerText,e);this.__templates={main:i,rows:J(s.innerText,e,!0)}}te.prototype={get _environment(){return this},paint:async function(e){const{numberOfWeeks:t,firstWeekIncludes:s}=e;if(!t){const e=sessionStorage.getItem("numberOfWeeks");if(e){const t=parseInt(e);if(isFinite(t))return await this.paint({numberOfWeeks:t,firstWeekIncludes:s})}return await this.paint({numberOfWeeks:5,firstWeekIncludes:s})}if(sessionStorage.setItem("numberOfWeeks",String(t)),!s){const e=sessionStorage.getItem("firstWeekIncludes");if(e){const s=r(e);if(s)return await this.paint({numberOfWeeks:t,firstWeekIncludes:s})}return await this.paint({numberOfWeeks:t,firstWeekIncludes:u()})}sessionStorage.setItem("firstWeekIncludes",s);const{view:i,newEvents:n}=await this.state;this.anchorElement.setAttribute("data-id",Z);const a=l(s),o=u();var d;this.__templates.main(this.anchorElement,{numberOfWeeksController:G({numberOfWeeks:t,firstWeekIncludes:s},this.navigateTo),firstDateIncludesController:K({dateTime:a,numberOfWeeks:t},this.navigateTo),previousWeekController:X({dateTime:a,numberOfWeeks:t},this.navigateTo),nextWeekController:V({dateTime:a,numberOfWeeks:t},this.navigateTo),unreadNavigation:Y({newEvents:n},this.navigateTo),searchNavigation:(d=this.navigateTo,{handleClick:()=>{d({url:"/appointments/search/",parameters:{}})}})}),this.__templates.rows(this.anchorElement.querySelector(`*[data-id=${ee}]`),Q({numberOfWeeks:t,todayStrDate:o,focusStrDate:s},i,this.navigateTo))}};const se="appointments_list";function ie(){this.__templates=J(document.getElementById(se).innerText)}ie.prototype={hydrate:async function(e,t,s){let i=function*(e,t,s){let i=e;if(s&&s.sort){let t=[...e];t=t.sort(f),i=t}for(const{strDate:e,strTime:s,strDescription:n,strDetails:a,isDayOff:r,markUnread:u}of i)yield{strDate:e,strTime:s,markUnread:u,strDescription:n,strDetails:a,isDayOff:r,handleClick:()=>{t({url:"/calendar/mutate/modify",parameters:{preferredDate:e,preferredTime:s}})}}}(t,e.navigateTo,s);this.__templates(e.anchorElement.querySelector(`*[data-id=${se}]`),{appointments:i})},clear:function(e){e.anchorElement.querySelector(`*[data-id=${se}]`).innerHTML=""}};const ne="day-appointments_main";function ae(){this.__templates=J(document.getElementById(ne).innerText),this.__listHandler=new ie}ae.prototype={paint:async function({strDate:e}){let{view:t}=await this.state;this.anchorElement.setAttribute("data-id",ne);let s=t.get(e),i=s&&s.size;this.__templates(this.anchorElement,{strDate:e,menu:{back:{handleClick:()=>{this.navigateTo({url:"/calendar/grid",parameters:{}})}},create:{handleClick:()=>{this.navigateTo({url:"/calendar/mutate/create",parameters:{preferredDate:e}})}}},hasAppointments:i}),i&&this.__listHandler.hydrate(this,function*(e,t){for(let[s,i]of e)yield{strDate:t,strTime:s,strDescription:i.description,strDetails:i.details,markUnread:i.unread||!1,isDayOff:i.isDayOff||!1}}(s,e),{sort:!0})}};const re="unread-appointments_main";function ue(){this.__templates=J(document.getElementById(re).innerText),this.__listHandler=new ie}ue.prototype={paint:async function(){let{view:e,newEvents:t}=await this.state;this.anchorElement.setAttribute("data-id",re);let s=!!t.length;var i;this.__templates(this.anchorElement,{menu:{back:{handleClick:()=>{this.navigateTo({url:"/calendar/grid",parameters:{}})}},create:{handleClick:()=>{this.navigateTo({url:"/calendar/mutate/create",parameters:{preferredDate:u()}})}},markRead:s?{handleClick:(i=this,async function(){this.disabled=!0;try{await i.markRead(),history.back()}finally{this.disabled=!1}})}:void 0},hasAppointments:s}),s&&this.__listHandler.hydrate(this,function*(e,t){console.log(e,t);for(let{strDate:s,strTime:i}of e){const e=t.get(s).get(i),n=e.description,a=e.details,r=e.isDayOff||!1;yield{strDate:s,strTime:i,strDescription:n,strDetails:a,isDayOff:r}}}(t,e),{sort:!0})}};class oe{constructor(e){this.iterator=e,this.done=!1}next=()=>{const e=[];if(!this.done)for(let t=0;t<30;t++){const{done:t,value:s}=this.iterator.next();if(t)break;e.push(s)}return e.length?{value:e}:(this.done=!0,{done:!0,value:null})};[Symbol.iterator]=()=>this}function le(e){const t=new Set;for(const[s]of e.matchAll(/\b\w+\b/gi)){const e=be(s);e&&t.add(e)}return t}function de(e,t,s){return e.startsWith(t)?[e.slice(t.length),s]:void 0}function ce(e,t,s){const i=t.length,n=t[i-1];if(e.startsWith(t))e:{if(e.length>i){const t=e[i];if(t==n||"aeiouyh".includes(t))break e}return[e.slice(i),s]}}function he(e,t){const s=[];let i=e;for(;i.length;)e:{for(const e of t){const t=e(i);if(t){const[e,n]=t;for(const e of n)s.push(e);i=e;break e}}const e=i[0];s.push(e),i=i.slice(1)}return s.join("")}const pe=[e=>e.startsWith("ch")?[e.slice(2),"C"]:e.startsWith("cc")?[e.slice(2),"x"]:e.startsWith("cq")?[e.slice(1),""]:e.startsWith("ci")||e.startsWith("ce")?[e.slice(1),"s"]:e.startsWith("c")?[e.slice(1),"k"]:void 0,e=>e.startsWith("gea")||e.startsWith("geo")?[e.slice(2),"j"]:e.startsWith("gi")||e.startsWith("gy")||e.startsWith("ge")?[e.slice(1),"j"]:e.startsWith("gui")||e.startsWith("guy")||e.startsWith("gue")?[e.slice(2),"g"]:void 0,e=>de(e,"qu","k"),e=>de(e,"q","k"),e=>de(e,"ph","f"),e=>de(e,"ille","Y"),e=>ce(e,"on","O"),e=>ce(e,"ain","I"),e=>ce(e,"aim","I"),e=>de(e,"ai","e"),e=>ce(e,"an","A"),e=>ce(e,"am","A"),e=>ce(e,"ein","I"),e=>ce(e,"eim","I"),e=>de(e,"ei","e"),e=>ce(e,"en","A"),e=>ce(e,"em","A"),e=>ce(e,"in","I"),e=>ce(e,"im","I"),e=>de(e,"au","o"),e=>de(e,"eau","o"),e=>de(e,"eu","E"),e=>de(e,"ou","U"),e=>ce(e,"un","I"),e=>ce(e,"um","I"),e=>de(e,"y","i")],fe=[e=>de(e,"tiO","siO"),e=>de(e,"tiA","siA")],me=[e=>{if(e.length>1&&e[0]===e[1])return[e.slice(1),""]},e=>de(e,"h","")],ve=new Set(["au","aux","avec","ce","ces","dans","de","des","du","elle","en","et","eux","il","je","la","le","leur","lui","ma","mais","me","meme","mes","moi","mon","ne","nos","notre","nous","on","ou","par","pas","pour","qu","que","qui","sa","se","ses","son","sur","ta","te","tes","toi","ton","tu","un","une","vos","votre","vous","c","d","j","l","a","m","n","s","t","y","ete","etee","etees","etes","etant","suis","es","est","sommes","etes","sont","serai","seras","sera","serons","serez","seront","serais","serait","serions","seriez","seraient","etais","etait","etions","etiez","etaient","fus","fut","fumes","futes","furent","sois","soit","soyons","soyez","soient","fusse","fusses","fut","fussions","fussiez","fussent","ayant","eu","eue","eues","eus","ai","as","avons","avez","ont","aurai","auras","aura","aurons","aurez","auront","aurais","aurait","aurions","auriez","auraient","avais","avait","avions","aviez","avaient","eut","eumes","eutes","eurent","aie","aies","ait","ayons","ayez","aient","eusse","eusses","eut","eussions","eussiez","eussent","ceci","cela","cet","cette","ici","ils","les","leurs","quel","quels","quelle","quelles","sans","soi"]);function be(e){const t=e.toLocaleLowerCase();if(!ve.has(t)){if("eau"==t)return t;{const e=t.replaceAll("ç","ss").replaceAll("ï","hi").replaceAll("ë","he").replaceAll("ü","hu").replaceAll("ö","ho").replaceAll("ä","ha").normalize("NFKD").replace(/[^\x20-\x7F]/g,"");if(e.length<=1)return;{const t=he(he(he(e,pe),fe),me);return t.length<=1?void 0:t}}}}function ye(e,t,s,i){const{distance:n,penalization:a}=s,{x:r,y:u,upperBound:o}=i;if(n>o||a>=3)return 1/0;if(e.length){if(t.length){if(e[0]===t[0]){const s={distance:n,penalization:a-1};return ye(e.slice(1),t.slice(1),s,i)}{const s=function(e,t){if(e==t)return 0;switch(e+t){case"oO":case"Oo":case"uO":case"Ou":case"aA":case"Aa":case"eA":case"Ae":case"eE":case"Ee":case"uE":case"Eu":case"iI":case"Ii":case"iy":case"yi":case"yI":case"Iy":return.3;case"vf":case"fv":case"bp":case"pb":case"td":case"dt":case"sz":case"zs":return.7;default:return 1}}(e[0],t[0]),r={distance:n+s,penalization:a+s>=.5?1:0};return Math.min(ye(e.slice(1),t.slice(1),r,i),1.1*ye(e,t.slice(1),r,i),1.1*ye(e.slice(1),t,r,i))}}return n+e.length}return r.length>=4&&n<=1&&r[0]==u[0]?n:n+t.length}function ge(e,t,s){return e.length>t.length?ge(t,e,s):ye(e,t,{distance:0,penalization:0},{x:e,y:t,upperBound:s})}class _e{constructor(){this.documents=new Map,this.frequencies=new Map,this.documentCount=0}#v(e){const{strDate:t,strTime:s}=e;return`${t} ${s}`}#b(e,t,s){let i=[];for(const n of t.keys())if(s.has(n)){const t=Math.log((1+this.documentCount)/(1+(this.frequencies.get(n)||0))),s=e.has(n)?1:.9;i.push({weight:s,idf:t})}let n=0,a=0,r=0;for(const{weight:e,idf:t}of i)n+=.9*e,e>a?(a=e,r=t):e==a&&(r=r<t?t:r);return{distance:n,idf:r}}#y(e){const t=new Map;for(const s of e)for(const e of this.frequencies.keys()){const i=ge(s,e,4);if(i<=Math.min(4,s.length/2,e.length)){const s=t.get(e)||NaN,n=isFinite(s)?Math.min(i,s):i;t.set(e,n)}}let s=-1/0;for(const e of t.values())s=Math.max(s,e);for(const[e,i]of t.entries())t.set(e,1+s-i);for(const i of e)t.set(i,1+s);return t}acceptAppointment=e=>{const{strDate:t,strTime:s,strDescription:i}=e,n=le(i),a=this.#v({strDate:t,strTime:s});this.documents.set(a,n);for(const e of n){const t=this.frequencies.get(e)||0;this.frequencies.set(e,t+1)}this.documentCount+=1};cancelAppointment=e=>{const t=this.#v(e);this.documents.delete(t)};search=e=>{const{maximalCount:t,searchQuery:s}=e,i=this,n=le(s),a=this.#y(n),r=(e,t)=>t.distance==e.distance?t.idf-e.idf:t.distance-e.distance,o=u();let l=[],d=0;for(const e of new oe(i.documents.entries())){for(const[t,s]of e)if(!(t<o)){const{distance:e,idf:r}=i.#b(n,a,s);e>=d&&l.push({distance:e,key:t,idf:r})}l.sort(r),l.length>t&&(l=l.slice(0,t),d=l[0].distance)}return l}}const we="appointments-search_main";function Ce(){this.__templates=J(document.getElementById(we).innerText),this.__listHandler=new ie}Ce.prototype={paint:async function({defaultSearchQuery:e}){let{view:t}=await this.state;this.anchorElement.setAttribute("data-id",we);let s=new _e;for(let[e,i]of t)for(let[t,n]of i)s.acceptAppointment({strDate:e,strTime:t,strDescription:n.description});var i;this.__templates(this.anchorElement,{handleSubmit:(i=this,function(e){e.preventDefault();let n=this.querySelector("button"),a=this.search.value||"";if(a){n.disabled=!0;try{let e=s.search({maximalCount:10,searchQuery:a,past:!1});i.__listHandler.clear(i),i.__listHandler.hydrate(i,function*(e,t){for(let{key:s}of e){let e=s.substring(0,s.indexOf(" ")),i=s.substring(e.length+1),{unread:n,description:a,details:r,isDayOff:u}=t.get(e).get(i);yield{strDate:e,strTime:i,strDescription:a,strDetails:r,markUnread:n,isDayOff:u||!1}}}(e,t))}finally{n.disabled=!1}}}),hasAppointments:!1,defaultSearchQuery:e,menu:{back:{handleClick:()=>{this.navigateTo({url:"/calendar/grid",parameters:{}})}}}})}};const ke="calendar-mutation-form";function Ee(){this.__template=J(document.getElementById(ke).innerText),this.__listHandler=new ie}function De(){Ee.call(this)}function Ae(){Ee.call(this)}Ee.prototype={paint:async function({preferredDate:e,preferredTime:t}){let s,i,n,{view:a}=await this.state;if(this.anchorElement.setAttribute("data-id",ke),s="",e&&t){let r=a.get(e),u=new Map(r).get(t);s=u.description,i=u.details,n=u.isDayOff}this.__template(this.anchorElement,{"preferred-date":e,"preferred-time":t,"preferred-description":s,"preferred-details":i,"preferred-is-day-off":n?"yes":"no",handleAppCalendarMutationFormSubmit:({detail:s})=>s(this.submitCalendarMutation({preferredDate:e,preferredTime:t})),handleAppCalendarMutationFormChange:({detail:s})=>{const{date:i,time:n}=s;this.showConflicts({strTime:n,strDate:i},{preferredDate:e,preferredTime:t},a)},...this.templateParameters})},showConflicts:function({strTime:e,strDate:t},{preferredDate:s,preferredTime:i},n){let a=[];t&&e&&(s==t&&i==e||(a=[...new Map(n.get(t)).entries()].filter((([t])=>{return(s=e)==(i=t)||"fullday"==s||"fullday"==i||"afternoon"==s&&i>="12:00"||"afternoon"==i&&s>="12:00"||"morning"==s&&i<"12:00"||"morning"==i&&s<"12:00";var s,i})).filter((([e])=>i!==e)).map((([e,s])=>({strTime:e,strDate:t,strDescription:s.description,strDetails:void 0,markUnread:s.unread})))));let r=this.anchorElement.querySelector("*[data-id=conflicts_container]");this.__listHandler.clear(this),a.length?(this.__listHandler.hydrate(this,a,{sort:!0}),r.classList.remove("hidden")):r.classList.add("hidden")},submitCalendarMutation:function({preferredDate:e,preferredTime:t}){return async s=>{const{cancel:i}=s;if(i)await this.cancelEvent({strDate:e,strTime:t});else{const{strDate:i,strTime:n,isDayOff:a,strDescription:r,strDetails:u}=s;!e||!t||e===i&&t===n?await this.createEvent({strDate:i,strTime:n,strDescription:r,strDetails:u,isDayOff:a}):await this.editEvent({toCreate:{strDate:i,strTime:n,strDescription:r,strDetails:u,isDayOff:a},toCancel:{strDate:e,strTime:t}})}this.navigateTo({url:"/calendar-grid",parameters:{}})}}},De.prototype={templateParameters:{allowCancel:!1,pageTitle:"Créer un rendez-vous",submitText:"Créer"}},Object.setPrototypeOf(De.prototype,Ee.prototype),Ae.prototype={templateParameters:{allowCancel:!0,pageTitle:"Modifier le rendez-vous",submitText:"Modifier"}},Object.setPrototypeOf(Ae.prototype,Ee.prototype);const Le="authentication-pane";function Te(){}function Oe(e,t,s){const i=window.DOMPurify;if(!i)throw"DOMPurify library is required to use this method.";console.log(_);const n=_.get(e),[a,r]=n(s),u=document.createElement("div");u.innerHTML=a;for(const[e,t]of r)t(u.querySelector(`*[data-uuid=${e}]`));i.sanitize(u,{IN_PLACE:!0,CUSTOM_ELEMENT_HANDLING:{tagNameCheck:e=>!!e.match(/^app-/),attributeNameCheck:()=>!0,allowCustomizedBuiltInElements:!0}}),t.innnerHTML="",t.appendChild(u)}Te.prototype={paint:async function(){this.anchorElement.setAttribute("data-id",Le),this.render(Le,this.anchorElement,{handleAppAuthentify:({detail:e})=>e((async e=>{await this.authentify(e),this.navigateTo({url:"/calendar-grid",parameters:{}})})),username:this.authentifiedUser.userName})}},customElements.define("app-route-listener",class extends HTMLElement{constructor(){super(),this.currentRouteURL=void 0}connectedCallback(){window.addEventListener("popstate",(e=>this.handleHistoryChange({state:e.state}))),window.addEventListener("app-navigate",(({detail:e})=>this.handleNavigation(e))),(async()=>{await Se,this.__URLS=new Map([["/calendar-grid/",new te],["/appointments/day/",new ae],["/appointments/unread/",new ue],["/appointments/search/",new Ce],["/calendar/mutate/create",new De],["/calendar/mutate/modify",new Ae],["/authentication/",new Te]]),this.handleHistoryChange({})})()}handleHistoryChange({state:e,hash:t}){if(e)this.handleNavigation(e);else{if(null==t){let e;try{e=atob(location.hash.substring(1))}catch(t){e=""}return this.handleHistoryChange({hash:e})}{let e=t.substring(0,t.indexOf("?")),s=new URLSearchParams(t.substring(e.length+1,t.length)),i=Object.fromEntries(s);this.handleHistoryChange({state:{url:e,parameters:i}})}}}handleNavigation({url:e,parameters:t}){console.log("NAVIGATION",e,t);e:{if(e){const s=this.__URLS.get(e);if(s){this.currentRouteURL=e,this.clearPage(),("/authentication/"==e?this.patchAuthenticationPrototype(s):this.patchPrototype(s)).paint(t).catch(console.error);break e}}this.emitNavigation({url:"/calendar-grid/",parameters:{}})}}emitNavigation({url:e,parameters:t}){dispatchEvent(new CustomEvent("app-navigate",{detail:{url:e,parameters:t}}))}handleAuthenticationError(e){return async function(){try{return await e(...arguments)}catch(e){let{errorCode:t,errorMessage:s}=e;throw[401,403,429].includes(t)&&this.emitNavigation({url:"/authentication/",parameters:{errorMessage:s}}),e}}.bind(this)}patchPrototype(e){let t=this,s={get state(){return t.handleAuthenticationError((()=>y.state))()},get authentify(){return t.handleAuthenticationError(y.authentify)},get createEvent(){return t.handleAuthenticationError(y.createEvent)},get cancelEvent(){return t.handleAuthenticationError(y.cancelEvent)},get editEvent(){return t.handleAuthenticationError(y.editEvent)},get markRead(){return t.handleAuthenticationError(y.markRead)},get navigateTo(){return function({url:e,parameters:s}){const i=history.state;{const t=new URLSearchParams;for(const[e,i]of Object.entries(s))t.append(e,i);const n=`${e}?${t.toString()}`,a=`#${btoa(n)}`,r={url:e,parameters:s};i&&i.url===r.url?history.replaceState(r,"",a):history.pushState(r,"",a)}return t.emitNavigation({url:e,parameters:s})}},get anchorElement(){return document.getElementById("anchor-content")}};return Object.setPrototypeOf(s,e),s}clearPage(){document.getElementById("anchor-content").innerHTML=""}patchAuthenticationPrototype(e){let t=this,s={get state(){throw"Property not available in Authentication process"},get authentify(){return y.authentify},get authentifiedUser(){return y.authentifiedUser},get createEvent(){throw"Property not available in Authentication process"},get cancelEvent(){throw"Property not available in Authentication process"},get editEvent(){throw"Property not available in Authentication process"},get markRead(){throw"Property not available in Authentication process"},get navigateTo(){return function({url:e,parameters:s}){const i=history.state;{const t=new URLSearchParams;for(const[e,i]of Object.entries(s))t.append(e,i);const n=`${e}?${t.toString()}`,a=`#${btoa(n)}`,r={url:e,parameters:s};i&&i.url===r.url?history.replaceState(r,"",a):history.pushState(r,"",a)}return t.emitNavigation({url:e,parameters:s})}},get anchorElement(){return document.getElementById("anchor-content")},get render(){return Oe}};return Object.setPrototypeOf(s,e),s}});const Se=new Promise((e=>{window.addEventListener("load",e)}))})()})();